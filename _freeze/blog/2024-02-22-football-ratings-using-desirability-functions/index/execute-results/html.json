{
  "hash": "5009f8d2878e900021ed6c0b887ebcc4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Developing Offensive Ratings Using Desirability Functions\nsubtitle: Ranking football players using `{desirability2}` and multivariate optimisation\nauthor: Paul Johnson\ndate: 2024-02-22\nimage: math.jpg\ncategories:\n  - Desirability Functions\n  - Optimisation\n  - Football Analytics\n  - Data Science\n  - R\nbibliography: references.bib\n---\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Setup Code (Click to Expand)\"}\n# import packages\nsuppressPackageStartupMessages({\n  library(dplyr)\n  library(gt)\n  library(showtext)\n  library(ggplot2)\n  library(worldfootballR)\n  library(desirability2)\n})\n\n# setup fonts\nsysfonts::font_add_google(\"Poppins\")\nsysfonts::font_add_google(\"Lora\")\nshowtext::showtext_auto()\n\n# set plot theme\n# inspired by https://github.com/z3tt/TidyTuesday/blob/main/R/2020_31_PalmerPenguins.Rmd\ntheme_set(theme_minimal(base_size = 20, base_family = \"Poppins\")) +\n  theme_update(\n    panel.grid.major = element_line(color = \"grey90\", linewidth = .4),\n    panel.grid.minor = element_blank(),\n    axis.title.x = element_text(\n      color = \"grey30\", margin = margin(t = 5), size = rel(1.05)\n      ),\n    axis.title.y = element_text(\n      color = \"grey30\", margin = margin(r = 5), size = rel(1.05)\n      ),\n    axis.text = element_text(color = \"grey50\", size = rel(1)),\n    axis.ticks = element_line(color = \"grey90\", linewidth = .4),\n    axis.ticks.length = unit(.2, \"lines\"),\n    legend.position = \"top\",\n    legend.title = element_blank(),\n    legend.text = element_text(size = rel(1)),\n    plot.title = element_text(\n      hjust = 0, color = \"black\", family = \"Lora\",\n      size = rel(1.5), margin = margin(t = 5, b = 5)\n    ),\n    plot.subtitle = element_text(\n      hjust = 0, color = \"grey30\", family = \"Lora\",\n      lineheight = 0.5, size = rel(1.1), \n      margin = margin(5, 0, 5, 0)\n    ),\n    plot.title.position = \"plot\",\n    plot.caption = element_text(\n      color = \"grey50\", size = rel(0.8), hjust = 1,\n      margin = margin(10, 0, 0, 0)\n    ),\n    plot.caption.position = \"plot\",\n    plot.margin = margin(rep(10, 4))\n  )\n\n# function for creating tables\nformat_table <-\n  function(data, cols) {\n    data |>\n      gt() |>\n      fmt_number(columns = cols, decimals = 2) |>\n      tab_spanner(\n        label = \"Desirability Scores\",\n        columns = cols\n      ) |>\n      cols_align(\n        align = \"center\",\n        columns = cols\n      ) |>\n      tab_source_note(source_note = \"Source: FB Ref Via {worldfootballR}\") |>\n      tab_options(\n        table.width = pct(100),\n        table.font.names = \"Poppins\"\n      )\n  }\n```\n:::\n\n\nBuilding rating systems for complex, multidimensional contexts is difficult, and the results are often underwhelming. There are many examples of this in sports, where rating systems are common. While many sports have metrics that accurately describe team and player performance in specific contexts, ratings that summarise performance are more limited. Football has expected goals (xG). xG is a relatively accurate proxy for team performance because it describes every team's primary objective - score more goals than the opponent. However, players help their team achieve this objective in many ways that xG does not capture. \n\nAn accurate player rating system would help address this. Performance has multiple components, so rating players is a balancing act. While goals may be the most important part of the game, a player who scored two goals has not necessarily played better than their teammate who contributed a goal and an assist, because player performance is a combination of factors. Player ratings are a multivariate optimisation problem. \n\nIn this blog post, I will use a simple but often overlooked method for multivariate optimisation - desirability functions - to develop a rating system for offensive players in football, using data from the big five leagues in the 2022/23 season. The ratings will attempt to identify the best players in Europe in the 2022/23 season because match-level ratings seem less fun (and more difficult).\n\nAs someone prone to seeing rabbit holes as a challenge, I have spent far too much time debating what factors should go into player ratings and how to maximise the performance of a rating system, but the focus of this post is on the demonstration of desirability functions. The result is a rating system with plenty of room for improvement, but hopefully, in the process, this post will serve as a brief introduction to desirability functions.\n\n# Desirability Functions\n\nDesirability functions are a method for simultaneously optimising multiple variables [@kuhn2023; @harrington1965; @derringer1980]. If you have multiple variables, finding the optimal value of one may take you further away from the optimal value of the others. It is necessary to find an optimal combination of values instead, and desirability functions are a simple solution to this problem [@kuhn2023].\n\nDesirability functions are common in fields like genomics, and they are sometimes used in machine learning to optimise across multiple evaluation metrics or model parameters. The [`{desirability2}`](https://desirability2.tidymodels.org/) package is a part of the [tidymodels](https://www.tidymodels.org/) machine learning framework, but it is not limited to optimising evaluation metrics. While there are other ways of approaching this type of task, I like desirability functions for their relative simplicity. They are quick and easy, and they're pretty simple to explain to non-technical audiences. \n\n## How Desirability Works\n\nDesirability functions optimise across multiple variables by mapping each variable onto a standard scale from one (maximally desirable) to zero (unacceptable) using a transformation function[^transformation], before calculating the weighted combination of these individual scores using the arithmetic or geometric mean[^mean] and optimising this overall desirability score [@kuhn2016; @kuhn2019; @kuhn2023].\n\nMapping each variable to a standard scale makes a direct comparison between variables easier. The transformation function depends on what desirability looks like for each variable. If higher values are more desirable, maximisation would be appropriate, or minimisation when lower values are more desirable. Other transformations are possible, such as a particular target value or a box function that specifies a desirable interval, and there are also mechanisms for making desirability easier or harder to achieve, using scaling features. Having transformed each variable onto a scale where values approaching one are more desirable, the observation that achieves the highest average value of all individual desirability scores is the observation that is the closest to being maximally desirable. \n\n[^transformation]: \n\n    With $\\boldsymbol{R}$ variables being simultaneously optimised, denoted $f_{r}(\\boldsymbol{X}) \n    (r = 1 ... R)$, each must be individually optimised using a desirability function that approaches \n    1 when $f_{r}(\\boldsymbol{X})$ is optimal and approaches 0 when $f_{r}(\\boldsymbol{X})$ is \n    unacceptable. The optimisation function for minimising $f_{r}(\\boldsymbol{X})$ [@kuhn2016] is: \n\n    $$\n    \\begin{equation}\n      d_{r}^{min}=\\begin{cases}\n      0 & \\text{if $f_r(\\boldsymbol{X}) > B$}\\\\\n      (\\frac{f_{r}(\\boldsymbol{X})-B}{A-B})^{s} & \\text{if $A \\leq f_{r}(\\boldsymbol{X}) \\leq B$}\\\\\n      1 & \\text{if $f_r(\\boldsymbol{X}) < A$}\n      \\end{cases}\n    \\end{equation}\n    $$\n    \n    where $A$ and $B$ specify the minimum and maximum value that $f_{r}(\\boldsymbol{X})$ can reach,\n    and $s$ is a scaling feature that makes it easier ($s > 1$) or harder ($s < 1$) to achieve maximal\n    desirability.\n    \n    The optimisation function for maximising $f_{r}(\\boldsymbol{X})$ [@kuhn2016] is:\n\n    $$\n    \\begin{equation}\n      d_{r}^{max}=\\begin{cases}\n      0 & \\text{if $f_r(\\boldsymbol{X}) < A$}\\\\\n      (\\frac{f_{r}(\\boldsymbol{X})-A}{B-A})^{s} & \\text{if $A \\leq f_{r}(\\boldsymbol{X}) \\leq B$}\\\\\n      1 & \\text{if $f_r(\\boldsymbol{X}) > B$}\n      \\end{cases}\n    \\end{equation}\n    $$\n    \n    where $A$, $B$, and $s$ are again the minimum and maximum values and the scaling feature.\n\n[^mean]: \n\n    The arithmetic mean is the typical mean average value that people are used to seeing, which sums \n    all values and divides the sum by the sample size, $n$, while the geometric mean multiplies all \n    values, before taking the $n$th root (the $n$ being the number of values multiplied) of that \n    product. Both arithmetic and geometric mean are measures of central tendency, but geometric mean\n    is more robust when dealing with non-independent values, less responsive to outliers, and more \n    capable of handling skewed data.\n\n## The `{desirability2}` Package\n\nThere are two main groups of functions in the [`{desirability2}`](https://desirability2.tidymodels.org/reference/index.html) package - the [transformation functions](https://desirability2.tidymodels.org/reference/inline_desirability.html) and the [overall desirability function](https://desirability2.tidymodels.org/reference/d_overall.html). \n\nWhile the most commonly used transformation functions will be `d_max()` and `d_min()`, there are several other transformations (`d_target()`, `d_box()`, and `d_category()`). Where none of these functions are sufficient, `d_custom()` offers functionality for specifying a custom transformation. Finally, `d_overall()` calculates the overall desirability score.\n\nAll {desirability2} functions can be a part of a typical [tidyverse](https://www.tidyverse.org/) pipeline.\n\n# A Rating System for Offensive Football Players \n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Data Code (Click to Expand)\"}\n# get raw data\nstandard_stats <-\n  fb_big5_advanced_season_stats(\n    season_end_year = 2023,\n    stat_type = \"standard\",\n    team_or_player = \"player\"\n  ) |>\n  janitor::clean_names(\n    replace = c(\n      \"_Playing\" = \"\",\n      \"_Expected\" = \"\",\n      \"_Progression\" = \"\",\n      \"PK\" = \"pk\",\n      \"PKatt\" = \"pk_att\",\n      \"xG\" = \"xg\",\n      \"xAG\" = \"xag\",\n      \"_Per_90\" = \"90\",\n      \"_Per\" = \"90\"\n    )\n  ) |>\n  mutate(\n    across(\n      starts_with(\"prg\"), ~ round(.x/mins90, 2), \n      .names = \"{.col}90\"\n      ),\n    position = stringr::str_split_i(pos, pattern = \",\", i = 1)\n    ) |> \n  select(player, position, squad, comp, ends_with(\"90\"))\n\nshooting_stats <-\n  fb_big5_advanced_season_stats(\n    season_end_year = 2023,\n    stat_type = \"shooting\",\n    team_or_player = \"player\"\n    ) |> \n  janitor::clean_names(\n    replace = c(\n      \"_Standard\" = \"\",\n      \"_per_90\" = \"90\"\n      )\n    ) |>\n  select(player, squad, sh90)\n\npassing_stats <-\n  fb_big5_advanced_season_stats(\n    season_end_year = 2023,\n    stat_type = \"passing\",\n    team_or_player = \"player\"\n  ) |> \n  janitor::clean_names(\n    replace = c(\n      \"_Expected\" = \"\",\n      \"xA\" = \"xa\"\n      )\n    ) |>\n  mutate(xa90 = round(xa/mins_per_90, 2)) |> \n  select(player, squad, xa90)\n\ngca_stats <-\n  fb_big5_advanced_season_stats(\n    season_end_year = 2023, \n    stat_type = \"gca\", \n    team_or_player = \"player\"\n  ) |>\n  janitor::clean_names(replace = c(\"_SCA\" = \"\")) |> \n  select(player, squad, sca90)\n\npossession_stats <-\n  fb_big5_advanced_season_stats(\n    season_end_year = 2023,\n    stat_type = \"possession\",\n    team_or_player = \"player\"\n  ) |> \n  janitor::clean_names() |> \n  mutate(pen_touches90 = round(att_pen_touches/90, 2)) |> \n  select(player, squad, pen_touches90)\n\n# join full dataset\nbig_five_stats <-\n  standard_stats |> \n  full_join(shooting_stats) |> \n  full_join(passing_stats) |> \n  full_join(gca_stats) |> \n  full_join(possession_stats) |> \n  tibble() |> \n  tidyr::drop_na() |> \n  filter(mins90 > 15 & position != \"GK\") |> \n  rename(\n    team = squad, \n    league = comp,\n    npg90 = g_minus_pk90\n    )\n```\n:::\n\n\nUsing the excellent [`{worldfootballR}`](https://jaseziv.github.io/worldfootballR) package, I have pulled together player-level [FB Ref](https://fbref.com/) data for the 2022/23 season across the big five leagues, for a variety of different offensive measures. The data represents multiple elements of team offense, and in order to capture this, I have split the data into three components - goal threat, chance creation, and ball progression.\n\nGoal threat is made up of four variables, non-penalty goals (npG), non-penalty expected goals (npxG), shots, and touches in the penalty area, while chance creation is comprised of just three - assists, expected assists (xA), and shot-creating actions (SCA). Finally, ball progression is also made up of three variables, progressive passes, carries, and receptions. Every variable in each desirability function is calculated per 90 minutes, to standardise variables by a player's playing time.\n\nThe variables that make up each offensive component, and even the components themselves, are far from exhaustive. There are lots of different variables that could (and probably should) be included, and other aspects of a football team's offense, like the defensive contributions made by offensive players higher up the pitch, would lead to a more precise rating system. However, the variables that make up the desirability functions here should do a reasonably effective job of capturing all three offensive components without overcomplicating things for the purpose of a blog post.\n\n## Goal Threat\n\nPerhaps it is stating the obvious to even the most \"I'm only here for the stats\" folks reading this blog post, but scoring goals is a very important part of football. Goals are good. Teams love them. Everyone loves players that do them. So it makes sense to start the rating system with the goal threat component.\n\nThe four variables that make up the goal threat desirability function are npG, npxG, shots, and touches in the opponent's penalty area. All of these variables have relatively clear predictive value when trying to predict goals, though you could also include other variables like average shot distance if you wanted to be more precise. Each variable also has a positive association with performance, so the desirability functions are all seeking to maximise their values. \n\nThe two most predictive variables are, perhaps unsurprisingly, npG and npxG, while shots and touches in the opponent's penalty area are more supplementary. As a result, goals and expected goals have been rescaled to give them greater weight in the overall desirability score, while shots and touches have been rescaled to downweight their value (discussed in greater detail in @sec-scaling). The code for computing the goal threat desirability function is below (`d_max()` is the function doing all the work) and @tbl-goal-threat shows the top ten players in terms of goal threat.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngoal_threat <- \n  big_five_stats |>\n  mutate(\n    # maximise npg90 & npxg90 with higher scale\n    across(\n      .cols = c(npg90, npxg90),\n      ~ d_max(.x, use_data = TRUE, scale = 2),\n      .names = \"d_{.col}\"\n      ),\n    # maximise shots90 & pen_touches90 with lower scale\n    across(\n      .cols = c(sh90, pen_touches90),\n      ~ d_max(.x, use_data = TRUE, scale = 0.5),\n      .names = \"d_{.col}\"\n    ),\n    # overall desirability score for goal scoring\n    # tolerance set to 0.1 so that lowest values are not 0\n    d_goals = d_overall(across(starts_with(\"d_\")), tolerance = 0.1)\n  ) |> \n  select(player, position, team, league, starts_with(\"d_\")) |> \n  arrange(desc(d_goals)) |> \n  rename_at(vars(player:league), snakecase::to_title_case) |> \n  rename(\n    \"Non-Penalty Goals\" = d_npg90,\n    \"Non-Penalty xG\" = d_npxg90,\n    \"Shots\" = d_sh90,\n    \"Penalty Area Touches\" = d_pen_touches90,\n    \"Overall\" = d_goals\n  )\n```\n:::\n\n::: {#tbl-goal-threat .cell tbl-cap='Goal Threat Ratings'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Table Code (Click to Expand)\"}\ngoal_threat |> \n  head(10) |>\n  format_table(cols = 5:9)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"wbwajtijjg\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#wbwajtijjg table {\n  font-family: Poppins;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#wbwajtijjg thead, #wbwajtijjg tbody, #wbwajtijjg tfoot, #wbwajtijjg tr, #wbwajtijjg td, #wbwajtijjg th {\n  border-style: none;\n}\n\n#wbwajtijjg p {\n  margin: 0;\n  padding: 0;\n}\n\n#wbwajtijjg .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#wbwajtijjg .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#wbwajtijjg .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#wbwajtijjg .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#wbwajtijjg .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#wbwajtijjg .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#wbwajtijjg .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#wbwajtijjg .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#wbwajtijjg .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#wbwajtijjg .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#wbwajtijjg .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wbwajtijjg .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#wbwajtijjg .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#wbwajtijjg .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#wbwajtijjg .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbwajtijjg .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#wbwajtijjg .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#wbwajtijjg .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#wbwajtijjg .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbwajtijjg .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#wbwajtijjg .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbwajtijjg .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#wbwajtijjg .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbwajtijjg .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wbwajtijjg .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbwajtijjg .gt_left {\n  text-align: left;\n}\n\n#wbwajtijjg .gt_center {\n  text-align: center;\n}\n\n#wbwajtijjg .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#wbwajtijjg .gt_font_normal {\n  font-weight: normal;\n}\n\n#wbwajtijjg .gt_font_bold {\n  font-weight: bold;\n}\n\n#wbwajtijjg .gt_font_italic {\n  font-style: italic;\n}\n\n#wbwajtijjg .gt_super {\n  font-size: 65%;\n}\n\n#wbwajtijjg .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#wbwajtijjg .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#wbwajtijjg .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#wbwajtijjg .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#wbwajtijjg .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#wbwajtijjg .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#wbwajtijjg .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Player\">Player</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Position\">Position</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Team\">Team</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"League\">League</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"5\" scope=\"colgroup\" id=\"Desirability Scores\">\n        <span class=\"gt_column_spanner\">Desirability Scores</span>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Non-Penalty Goals\">Non-Penalty Goals</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Non-Penalty xG\">Non-Penalty xG</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Shots\">Shots</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Penalty Area Touches\">Penalty Area Touches</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Overall\">Overall</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Erling Haaland</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Manchester City</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Premier League</td>\n<td headers=\"Non-Penalty Goals\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"Non-Penalty xG\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"Shots\" class=\"gt_row gt_center\">0.90</td>\n<td headers=\"Penalty Area Touches\" class=\"gt_row gt_center\">0.85</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.93</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Kylian Mbappé</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Paris S-G</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Non-Penalty Goals\" class=\"gt_row gt_center\">0.78</td>\n<td headers=\"Non-Penalty xG\" class=\"gt_row gt_center\">0.90</td>\n<td headers=\"Shots\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"Penalty Area Touches\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.91</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Victor Osimhen</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Napoli</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Serie A</td>\n<td headers=\"Non-Penalty Goals\" class=\"gt_row gt_center\">0.80</td>\n<td headers=\"Non-Penalty xG\" class=\"gt_row gt_center\">0.77</td>\n<td headers=\"Shots\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"Penalty Area Touches\" class=\"gt_row gt_center\">0.88</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.86</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Robert Lewandowski</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Barcelona</td>\n<td headers=\"League\" class=\"gt_row gt_left\">La Liga</td>\n<td headers=\"Non-Penalty Goals\" class=\"gt_row gt_center\">0.60</td>\n<td headers=\"Non-Penalty xG\" class=\"gt_row gt_center\">0.97</td>\n<td headers=\"Shots\" class=\"gt_row gt_center\">0.96</td>\n<td headers=\"Penalty Area Touches\" class=\"gt_row gt_center\">0.83</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.83</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Callum Wilson</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Newcastle Utd</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Premier League</td>\n<td headers=\"Non-Penalty Goals\" class=\"gt_row gt_center\">0.59</td>\n<td headers=\"Non-Penalty xG\" class=\"gt_row gt_center\">0.92</td>\n<td headers=\"Shots\" class=\"gt_row gt_center\">0.85</td>\n<td headers=\"Penalty Area Touches\" class=\"gt_row gt_center\">0.64</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.74</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Loïs Openda</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Lens</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Non-Penalty Goals\" class=\"gt_row gt_center\">0.59</td>\n<td headers=\"Non-Penalty xG\" class=\"gt_row gt_center\">0.71</td>\n<td headers=\"Shots\" class=\"gt_row gt_center\">0.89</td>\n<td headers=\"Penalty Area Touches\" class=\"gt_row gt_center\">0.74</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.72</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Lautaro Martínez</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Inter</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Serie A</td>\n<td headers=\"Non-Penalty Goals\" class=\"gt_row gt_center\">0.55</td>\n<td headers=\"Non-Penalty xG\" class=\"gt_row gt_center\">0.60</td>\n<td headers=\"Shots\" class=\"gt_row gt_center\">0.97</td>\n<td headers=\"Penalty Area Touches\" class=\"gt_row gt_center\">0.75</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.70</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Karim Benzema</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Real Madrid</td>\n<td headers=\"League\" class=\"gt_row gt_left\">La Liga</td>\n<td headers=\"Non-Penalty Goals\" class=\"gt_row gt_center\">0.32</td>\n<td headers=\"Non-Penalty xG\" class=\"gt_row gt_center\">0.77</td>\n<td headers=\"Shots\" class=\"gt_row gt_center\">0.97</td>\n<td headers=\"Penalty Area Touches\" class=\"gt_row gt_center\">0.76</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.65</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Alexandre Lacazette</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Lyon</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Non-Penalty Goals\" class=\"gt_row gt_center\">0.48</td>\n<td headers=\"Non-Penalty xG\" class=\"gt_row gt_center\">0.54</td>\n<td headers=\"Shots\" class=\"gt_row gt_center\">0.84</td>\n<td headers=\"Penalty Area Touches\" class=\"gt_row gt_center\">0.83</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.65</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Darwin Núñez</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Liverpool</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Premier League</td>\n<td headers=\"Non-Penalty Goals\" class=\"gt_row gt_center\">0.26</td>\n<td headers=\"Non-Penalty xG\" class=\"gt_row gt_center\">0.73</td>\n<td headers=\"Shots\" class=\"gt_row gt_center\">0.98</td>\n<td headers=\"Penalty Area Touches\" class=\"gt_row gt_center\">0.71</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.60</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"9\">Source: FB Ref Via {worldfootballR}</td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nErling Haaland, Kylian Mbappé, and Victor Osimhen leading the way in @tbl-goal-threat definitely inspires some confidence in this approach! Bar a few exceptions, like Alexandre Lacazette being one of the ten greatest goal threats in Europe at his big old age, the top ten feels pretty reasonable. The player that stands out the most, in part due to how high he is on the list, is Callum Wilson. However, looking back at his numbers last season, it's more that he had a freak season than that the goal threat desirability score is doing something wonky. I don't believe Callum Wilson poses the fifth greatest goal threat in the big five leagues, but it's hard to argue with him being ranked fifth for his production last season.\n\nI was also a little surprised not to see Harry Kane making the top ten, and it turns out he is in 15th. This appears to be because his xG was lower than the players ahead of him, despite him scoring plenty of goals last season. I think Kane's lower rating raises questions about the decision to weight goals and expected goals equally. A more detailed rating system would need to make a decision about whether the goal is to describe a player's past performance or identify the best players, which is inherently about predicting future performance. If it is the former, goals should probably be weighted higher, but if it is the latter, then expected goals should probably be favoured.\n\n### Scaling Desirability Functions {#sec-scaling}\n\nEach individual desirability function can be easily adjusted using the scaling feature, $s$, which can be increased in order to make maximal desirability harder to reach, and decreased to make it easier. The default value is 1 because $s$ is an exponent and a 1 effectively cancels this out. We're having fun. \n\nIn the goal threat desirability function, goals and expected goals have $s = 2$, while for shots and touches in the opponent's penalty area $s = 0.5$. This captures the fact that npG and npxG are very direct measures of goal threat (they are literally the actual goals and the probability of scoring actual goals!), while shots and touches are a lot less direct. I suspect we'd be better served giving shots greater weight in the function than touches, but in the interest of trying my hardest not to get bogged down in the domain context and focus on the method, let's just give them the same weight.\n\nGiven that $s$ is the exponent, the scaling feature transforms the desirability function in a non-linear manner. The plot below illustrates how scaling affects desirability.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Plot Code (Click to Expand)\"}\nbig_five_stats |> \n  mutate(\n    # maximise shots90 without rescaling\n    no_scale = d_max(sh90, use_data = TRUE),\n    # maximise shots90 with lower scale\n    easier   = d_max(sh90, use_data = TRUE, scale = 0.2),\n    # maximise shots90 with higher scale\n    harder = d_max(sh90, use_data = TRUE, scale = 5)\n  ) |> \n  tidyr::pivot_longer(\n    cols = c(no_scale, easier, harder), \n    names_to = \"scaling\", values_to = \"value\"\n    ) |> \n  mutate(scaling = factor(scaling, levels = c(\"no_scale\", \"easier\", \"harder\"))) |> \n  ggplot(aes(x = sh90, y = value, colour = scaling)) +\n  geom_point(size = 1, alpha = .5) +\n  geom_line(linewidth = 0.8, alpha = .5) +\n  scale_colour_manual(\n    values = c(\"grey20\", \"#026E99\", \"#D93649\"),\n    labels = snakecase::to_title_case\n    ) +\n  labs(\n    title = \n        \"Scaling Effects on the Desirability Score of Shots/90\",\n    subtitle = \n      stringr::str_wrap(\n        glue::glue(\n          \"The unscaled desirability function is a linear transformation of \",\n          \"shots per 90, while the rescaled functions are non-linear, with \",\n          \"scaling values > 1 making higher desirability more difficult to \",\n          \"satisfy and values < 1 making it easier.\"\n          ),\n        width = 95\n      ),\n    x = \"Shots/90\", y = \"Desirability\",\n    caption = \n      \"Visualisation: Paul Johnson  |  Data: FB Ref Via {worldfootballR}\"\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/scaling-shots-1.png){width=672}\n:::\n:::\n\n\nWhen scaling desirability functions I think it is important to recognise the effects that imposing a non-linear transformation has. Because I've used the `use_data = TRUE` argument in `d_max()`, the maximum and minimum value in each desirability function is set by the data, meaning that regardless of the scaling applied the maximum value will still be 1 and the minimum value will be 0. However, as the scale increases, this will make it much harder for values to reach higher desirability scores, meaning that lower values of the corresponding variable will be given lower scores, but the non-linearity imposed increases the rate of desirability increases at higher values of the corresponding variable.\n\nIt is important to realise that making maximal desirability harder in this non-linear fashion does not downweight the highest values of that variable. Instead, it actually increases the magnitude of those highest values, because so few other observations are similarly high! Therefore, if you want to downweight the value of a particular variable in the overall desirability score, it needs to be easier to reach maximal desirability, because all values of that variable will have a higher score and that will give the highest values less leverage.\n\nI think it is a little difficult to process the exponential effects of $s$ in this context. We are primarily interested in the highest values of each desirability function, given that the focus is on building a rating system, and increasing $s$ achieves our goals at the top-end of the ratings, but it obviously feels a little wonky to exponentially increase the value of a particular desirability function in order to downweight it in the overall desirability score! I think it is sensible to visualise the effects that your intended scaling will have, so as to help you think through the choices you're making.\n\n## Chance Creation\n\nIf doing goals is the most important part of an offense in football, then helping others do goals must be the next best thing. Which brings us to chance creation. The process for creating a rating system for chance creation is more or less the same as with goal scoring. I've selected three variables that will go into the chance creation ratings - assists, expected assists (xA), and shot-creating actions (SCA).\n\nIn this case, the SCA desirability function has been scaled to reduce SCA's effect on the overall score but assists and expected assists are unscaled. While I think that shot-creating actions are not quite as valuable as assists, I don't want to exponentially increase the value of assists and expected assists at the top end of the desirability score. Goalscoring is the most important part of football, so I think small increases in the per 90 rate of goalscoring should be rewarded greatly, but creating chances, while still very important, is still reliant on the player receiving the ball putting it away, and I think the decisions made here reflect that.\n\nJust as with the goal threat component, the choices I've made here are more of an art than a science, and I think I could easily be convinced that the way I've structured the desirability functions for chance creation are incorrect. Unfortunately for you, I'm not actually having that debate, so I went ahead and made my own choice. It's probably wrong. @tbl-chance-creation shows the results of my poor choices, in life and in this blog post.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchance_creation <- \n  big_five_stats |>\n  mutate(\n    across(\n      .cols = c(ast90, xa90),\n      ~ d_max(.x, use_data = TRUE),\n      .names = \"d_{.col}\"\n      ),\n    d_sca90 = d_max(sca90, use_data = TRUE, scale = 0.5),\n    d_chances = d_overall(across(starts_with(\"d_\")), tolerance = 0.1)\n  ) |> \n  select(player, position, team, league, starts_with(\"d_\")) |> \n  rename_at(vars(player:league), snakecase::to_title_case) |> \n  rename(\n    \"Assists\" = d_ast90,\n    \"xA\" = d_xa90,\n    \"SCA\" = d_sca90,\n    \"Overall\" = d_chances\n  ) |> \n  arrange(desc(Overall))\n```\n:::\n\n::: {#tbl-chance-creation .cell tbl-cap='Chance Creation Ratings'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Table Code (Click to Expand)\"}\nchance_creation |> \n  head(10) |> \n  format_table(cols = 5:8)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"oxsyxttozi\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#oxsyxttozi table {\n  font-family: Poppins;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#oxsyxttozi thead, #oxsyxttozi tbody, #oxsyxttozi tfoot, #oxsyxttozi tr, #oxsyxttozi td, #oxsyxttozi th {\n  border-style: none;\n}\n\n#oxsyxttozi p {\n  margin: 0;\n  padding: 0;\n}\n\n#oxsyxttozi .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#oxsyxttozi .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#oxsyxttozi .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#oxsyxttozi .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#oxsyxttozi .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#oxsyxttozi .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#oxsyxttozi .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#oxsyxttozi .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#oxsyxttozi .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#oxsyxttozi .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#oxsyxttozi .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#oxsyxttozi .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#oxsyxttozi .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#oxsyxttozi .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#oxsyxttozi .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxsyxttozi .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#oxsyxttozi .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#oxsyxttozi .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#oxsyxttozi .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxsyxttozi .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#oxsyxttozi .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxsyxttozi .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#oxsyxttozi .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxsyxttozi .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oxsyxttozi .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxsyxttozi .gt_left {\n  text-align: left;\n}\n\n#oxsyxttozi .gt_center {\n  text-align: center;\n}\n\n#oxsyxttozi .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#oxsyxttozi .gt_font_normal {\n  font-weight: normal;\n}\n\n#oxsyxttozi .gt_font_bold {\n  font-weight: bold;\n}\n\n#oxsyxttozi .gt_font_italic {\n  font-style: italic;\n}\n\n#oxsyxttozi .gt_super {\n  font-size: 65%;\n}\n\n#oxsyxttozi .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#oxsyxttozi .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#oxsyxttozi .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#oxsyxttozi .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#oxsyxttozi .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#oxsyxttozi .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#oxsyxttozi .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Player\">Player</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Position\">Position</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Team\">Team</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"League\">League</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"4\" scope=\"colgroup\" id=\"Desirability Scores\">\n        <span class=\"gt_column_spanner\">Desirability Scores</span>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Assists\">Assists</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"xA\">xA</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"SCA\">SCA</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Overall\">Overall</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Kevin De Bruyne</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Manchester City</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Premier League</td>\n<td headers=\"Assists\" class=\"gt_row gt_center\">0.94</td>\n<td headers=\"xA\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"SCA\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.98</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Neymar</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Paris S-G</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Assists\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"xA\" class=\"gt_row gt_center\">0.83</td>\n<td headers=\"SCA\" class=\"gt_row gt_center\">0.97</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.93</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Lionel Messi</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Paris S-G</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Assists\" class=\"gt_row gt_center\">0.80</td>\n<td headers=\"xA\" class=\"gt_row gt_center\">0.98</td>\n<td headers=\"SCA\" class=\"gt_row gt_center\">0.98</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.91</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Rémy Cabella</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Lille</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Assists\" class=\"gt_row gt_center\">0.56</td>\n<td headers=\"xA\" class=\"gt_row gt_center\">0.83</td>\n<td headers=\"SCA\" class=\"gt_row gt_center\">0.99</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.77</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Thomas Müller</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Bayern Munich</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Bundesliga</td>\n<td headers=\"Assists\" class=\"gt_row gt_center\">0.67</td>\n<td headers=\"xA\" class=\"gt_row gt_center\">0.73</td>\n<td headers=\"SCA\" class=\"gt_row gt_center\">0.84</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.74</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Antoine Griezmann</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Atlético Madrid</td>\n<td headers=\"League\" class=\"gt_row gt_left\">La Liga</td>\n<td headers=\"Assists\" class=\"gt_row gt_center\">0.78</td>\n<td headers=\"xA\" class=\"gt_row gt_center\">0.60</td>\n<td headers=\"SCA\" class=\"gt_row gt_center\">0.88</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.74</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Ousmane Dembélé</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Barcelona</td>\n<td headers=\"League\" class=\"gt_row gt_left\">La Liga</td>\n<td headers=\"Assists\" class=\"gt_row gt_center\">0.70</td>\n<td headers=\"xA\" class=\"gt_row gt_center\">0.62</td>\n<td headers=\"SCA\" class=\"gt_row gt_center\">0.91</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.73</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Rayan Cherki</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Lyon</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Assists\" class=\"gt_row gt_center\">0.45</td>\n<td headers=\"xA\" class=\"gt_row gt_center\">0.83</td>\n<td headers=\"SCA\" class=\"gt_row gt_center\">0.97</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.71</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Kingsley Coman</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Bayern Munich</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Bundesliga</td>\n<td headers=\"Assists\" class=\"gt_row gt_center\">0.50</td>\n<td headers=\"xA\" class=\"gt_row gt_center\">0.79</td>\n<td headers=\"SCA\" class=\"gt_row gt_center\">0.91</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.71</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Raphaël Guerreiro</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">DF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Dortmund</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Bundesliga</td>\n<td headers=\"Assists\" class=\"gt_row gt_center\">0.73</td>\n<td headers=\"xA\" class=\"gt_row gt_center\">0.60</td>\n<td headers=\"SCA\" class=\"gt_row gt_center\">0.81</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.71</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"8\">Source: FB Ref Via {worldfootballR}</td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nAgain, the names at the top of the @tbl-chance-creation ratings give me confidence, especially the three names at the very top - Neymar, Kevin De Bruyne, and Lionel Messi. I don't think there are any huge surprises in these ratings, perhaps with the exception of Rémy Cabella, who has some solid to very good creation numbers but wouldn't necessarily be a name you'd immediately think of when thinking about the ten best creative players in the world. This is once again a reminder that Ligue 1 is very silly but is wonderfully chaotic.\n\n## Ball Progression\n\nThe final component, and possibly the most interesting of the three, is ball progression. The three variables included in the ball progression desirability function are progressive carries, passes, and receptions. Just as is the case with the previous two components, I'm sure you could include other variables as measures of ball progression, but I'm still too lazy to do that and I think a lot of those other variables would risk double-counting where those actions are picked up by one of the progression metrics.\n\nI am particularly unsure about how to weight the value of progressive actions, especially progressive passing and receptions, which are connected actions. I could see an argument for giving less weight to progressive receptions, and treating carries and passes equally, but I could also see a case that progressive passes and receptions should be treated equally because both the passer and receiver have to do their job to make the progressive action successful. Given my uncertainty about this particular category, I've decided it is best to weight all three variables equally.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nball_progression <-\n  big_five_stats |>\n  mutate(\n    across(\n      starts_with(\"prg\"),\n      ~ d_max(.x, use_data = TRUE),\n      .names = \"d_{.col}\"\n    ),\n    d_prg = d_overall(across(starts_with(\"d_\")), tolerance = 0.1)\n  ) |>\n  select(player, position, team, league, starts_with(\"d_\")) |>\n  arrange(desc(d_prg)) |>\n  rename_at(vars(player:league), snakecase::to_title_case) |> \n  rename(\n    \"Progressive Carrying\" = d_prg_c90,\n    \"Progressive Passing\" = d_prg_p90,\n    \"Progressive Receptions\" = d_prg_r90,\n    \"Overall\" = d_prg\n  )\n```\n:::\n\n::: {#tbl-ball-progression .cell tbl-cap='Ball Progression Ratings'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Table Code (Click to Expand)\"}\nball_progression |>\n  head(10) |>\n  format_table(cols = 5:8)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"nusjbpdalz\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#nusjbpdalz table {\n  font-family: Poppins;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#nusjbpdalz thead, #nusjbpdalz tbody, #nusjbpdalz tfoot, #nusjbpdalz tr, #nusjbpdalz td, #nusjbpdalz th {\n  border-style: none;\n}\n\n#nusjbpdalz p {\n  margin: 0;\n  padding: 0;\n}\n\n#nusjbpdalz .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#nusjbpdalz .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#nusjbpdalz .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#nusjbpdalz .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#nusjbpdalz .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#nusjbpdalz .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#nusjbpdalz .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#nusjbpdalz .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#nusjbpdalz .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#nusjbpdalz .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#nusjbpdalz .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#nusjbpdalz .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#nusjbpdalz .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#nusjbpdalz .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#nusjbpdalz .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nusjbpdalz .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#nusjbpdalz .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#nusjbpdalz .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#nusjbpdalz .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nusjbpdalz .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#nusjbpdalz .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nusjbpdalz .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#nusjbpdalz .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nusjbpdalz .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#nusjbpdalz .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nusjbpdalz .gt_left {\n  text-align: left;\n}\n\n#nusjbpdalz .gt_center {\n  text-align: center;\n}\n\n#nusjbpdalz .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#nusjbpdalz .gt_font_normal {\n  font-weight: normal;\n}\n\n#nusjbpdalz .gt_font_bold {\n  font-weight: bold;\n}\n\n#nusjbpdalz .gt_font_italic {\n  font-style: italic;\n}\n\n#nusjbpdalz .gt_super {\n  font-size: 65%;\n}\n\n#nusjbpdalz .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#nusjbpdalz .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#nusjbpdalz .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#nusjbpdalz .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#nusjbpdalz .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#nusjbpdalz .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#nusjbpdalz .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Player\">Player</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Position\">Position</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Team\">Team</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"League\">League</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"4\" scope=\"colgroup\" id=\"Desirability Scores\">\n        <span class=\"gt_column_spanner\">Desirability Scores</span>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Progressive Carrying\">Progressive Carrying</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Progressive Passing\">Progressive Passing</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Progressive Receptions\">Progressive Receptions</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Overall\">Overall</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Rayan Cherki</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Lyon</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.81</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.50</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.66</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.64</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Kingsley Coman</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Bayern Munich</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Bundesliga</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.79</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.31</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.62</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Ousmane Dembélé</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Barcelona</td>\n<td headers=\"League\" class=\"gt_row gt_left\">La Liga</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.32</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.71</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.61</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Jack Grealish</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Manchester City</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Premier League</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.79</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.30</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.72</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.56</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Kevin De Bruyne</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Manchester City</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Premier League</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.47</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.67</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.48</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.53</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Kylian Mbappé</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Paris S-G</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.67</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.28</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.79</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.53</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Rémy Cabella</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Lille</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.51</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.60</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.46</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.52</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Neymar</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Paris S-G</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.51</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.69</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.39</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.52</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Raphinha</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Barcelona</td>\n<td headers=\"League\" class=\"gt_row gt_left\">La Liga</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.53</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.31</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.78</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.51</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Vinicius Júnior</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Real Madrid</td>\n<td headers=\"League\" class=\"gt_row gt_left\">La Liga</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.89</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.17</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.84</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.51</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"8\">Source: FB Ref Via {worldfootballR}</td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nForwards dominated the first two components but @tbl-ball-progression is more diverse. This is to be expected, given that ball progression is often about moving the ball up the pitch to the forwards! @tbl-position-progression aggregates the ball progression desirability scores by position.\n\n\n::: {#tbl-position-progression .cell tbl-cap='Ball Progression Desirability by Position'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Table Code (Click to Expand)\"}\nball_progression |> \n  summarise(across(where(is.numeric), mean), .by = Position) |> \n  arrange(desc(Overall)) |> \n  format_table(cols = 2:5)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"rtevtopeku\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#rtevtopeku table {\n  font-family: Poppins;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#rtevtopeku thead, #rtevtopeku tbody, #rtevtopeku tfoot, #rtevtopeku tr, #rtevtopeku td, #rtevtopeku th {\n  border-style: none;\n}\n\n#rtevtopeku p {\n  margin: 0;\n  padding: 0;\n}\n\n#rtevtopeku .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#rtevtopeku .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#rtevtopeku .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#rtevtopeku .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#rtevtopeku .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#rtevtopeku .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#rtevtopeku .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#rtevtopeku .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#rtevtopeku .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#rtevtopeku .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#rtevtopeku .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#rtevtopeku .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#rtevtopeku .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#rtevtopeku .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#rtevtopeku .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rtevtopeku .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#rtevtopeku .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#rtevtopeku .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#rtevtopeku .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rtevtopeku .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#rtevtopeku .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rtevtopeku .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#rtevtopeku .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rtevtopeku .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rtevtopeku .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rtevtopeku .gt_left {\n  text-align: left;\n}\n\n#rtevtopeku .gt_center {\n  text-align: center;\n}\n\n#rtevtopeku .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#rtevtopeku .gt_font_normal {\n  font-weight: normal;\n}\n\n#rtevtopeku .gt_font_bold {\n  font-weight: bold;\n}\n\n#rtevtopeku .gt_font_italic {\n  font-style: italic;\n}\n\n#rtevtopeku .gt_super {\n  font-size: 65%;\n}\n\n#rtevtopeku .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#rtevtopeku .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#rtevtopeku .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#rtevtopeku .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#rtevtopeku .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#rtevtopeku .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#rtevtopeku .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Position\">Position</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"4\" scope=\"colgroup\" id=\"Desirability Scores\">\n        <span class=\"gt_column_spanner\">Desirability Scores</span>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Progressive Carrying\">Progressive Carrying</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Progressive Passing\">Progressive Passing</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Progressive Receptions\">Progressive Receptions</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Overall\">Overall</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.31</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.16</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.39</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.26</td></tr>\n    <tr><td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.22</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.35</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.17</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.23</td></tr>\n    <tr><td headers=\"Position\" class=\"gt_row gt_left\">DF</td>\n<td headers=\"Progressive Carrying\" class=\"gt_row gt_center\">0.16</td>\n<td headers=\"Progressive Passing\" class=\"gt_row gt_center\">0.24</td>\n<td headers=\"Progressive Receptions\" class=\"gt_row gt_center\">0.12</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.18</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"5\">Source: FB Ref Via {worldfootballR}</td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nThe results are not shocking, but the marginal differences in progression by position are interesting. As expected, forwards are dominant in the receptions category, but the responsibilities for progressive carries are more evenly split, and forwards are third behind midfielders and defenders in progressive passing.\n\n## Overall Offensive Ratings\n\nHaving created desirability scores for each offensive component, we could combine all three into an overall offensive rating using `d_overall()`. I think this would be a reasonable choice when the assumption is that each category is equally important in the overall score, but as discussed already, I don't think that's the case here. I think goal threat matters most, and chance creation and ball progression are, while important enough to be the two other categories in the overall ratings, a little less important than goals. \n\nWhether or not goals are more important than chance creation and ball progression is probably open to plenty of debate, but assuming that they are (because this is my blog and I said so), we have to weight the three categories to reflect this. Rather than overcomplicating things and trying to do this as part of the process within the desirability functions, I have downweighted chance creation and ball progression by multiplying them by 0.5. \n\nFinally, I have opted for the arithmetic mean instead of the geometric mean, because I think the purpose of the geometric mean is of less value here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\noffensive_rating <-\n  goal_threat |>\n  rename(\"Goal Threat\" = Overall) |> \n  full_join(chance_creation |> rename(\"Chance Creation\" = Overall)) |>\n  full_join(ball_progression |> rename(\"Ball Progression\" = Overall)) |>\n  mutate(\n    # downweight chance creation and ball progression desirability scores\n    across(.cols = c(\"Chance Creation\", \"Ball Progression\"), ~ .x * 0.5),\n    Overall =\n      d_overall(\n        across(.cols = c(\"Goal Threat\", \"Chance Creation\", \"Ball Progression\")),\n        geometric = FALSE\n        )\n  ) |>\n  select(\n    Player, Position, Team, League, \"Goal Threat\", \n    \"Chance Creation\", \"Ball Progression\", Overall\n    ) |>\n  arrange(desc(Overall))\n```\n:::\n\n::: {#tbl-offensive-rating .cell tbl-cap='Overall Offensive Ratings'}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Table Code (Click to Expand)\"}\noffensive_rating |>\n  head(10) |> \n  format_table(cols = 5:8)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"smxpeknmsw\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#smxpeknmsw table {\n  font-family: Poppins;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#smxpeknmsw thead, #smxpeknmsw tbody, #smxpeknmsw tfoot, #smxpeknmsw tr, #smxpeknmsw td, #smxpeknmsw th {\n  border-style: none;\n}\n\n#smxpeknmsw p {\n  margin: 0;\n  padding: 0;\n}\n\n#smxpeknmsw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#smxpeknmsw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#smxpeknmsw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#smxpeknmsw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#smxpeknmsw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#smxpeknmsw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#smxpeknmsw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#smxpeknmsw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#smxpeknmsw .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#smxpeknmsw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#smxpeknmsw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#smxpeknmsw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#smxpeknmsw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#smxpeknmsw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#smxpeknmsw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#smxpeknmsw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#smxpeknmsw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#smxpeknmsw .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#smxpeknmsw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#smxpeknmsw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#smxpeknmsw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#smxpeknmsw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#smxpeknmsw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#smxpeknmsw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#smxpeknmsw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#smxpeknmsw .gt_left {\n  text-align: left;\n}\n\n#smxpeknmsw .gt_center {\n  text-align: center;\n}\n\n#smxpeknmsw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#smxpeknmsw .gt_font_normal {\n  font-weight: normal;\n}\n\n#smxpeknmsw .gt_font_bold {\n  font-weight: bold;\n}\n\n#smxpeknmsw .gt_font_italic {\n  font-style: italic;\n}\n\n#smxpeknmsw .gt_super {\n  font-size: 65%;\n}\n\n#smxpeknmsw .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#smxpeknmsw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#smxpeknmsw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#smxpeknmsw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#smxpeknmsw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#smxpeknmsw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#smxpeknmsw .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Player\">Player</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Position\">Position</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Team\">Team</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"League\">League</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"4\" scope=\"colgroup\" id=\"Desirability Scores\">\n        <span class=\"gt_column_spanner\">Desirability Scores</span>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Goal Threat\">Goal Threat</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Chance Creation\">Chance Creation</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Ball Progression\">Ball Progression</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Overall\">Overall</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Kylian Mbappé</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Paris S-G</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Goal Threat\" class=\"gt_row gt_center\">0.91</td>\n<td headers=\"Chance Creation\" class=\"gt_row gt_center\">0.25</td>\n<td headers=\"Ball Progression\" class=\"gt_row gt_center\">0.26</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.47</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Lionel Messi</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Paris S-G</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Goal Threat\" class=\"gt_row gt_center\">0.54</td>\n<td headers=\"Chance Creation\" class=\"gt_row gt_center\">0.46</td>\n<td headers=\"Ball Progression\" class=\"gt_row gt_center\">0.25</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.41</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Erling Haaland</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Manchester City</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Premier League</td>\n<td headers=\"Goal Threat\" class=\"gt_row gt_center\">0.93</td>\n<td headers=\"Chance Creation\" class=\"gt_row gt_center\">0.18</td>\n<td headers=\"Ball Progression\" class=\"gt_row gt_center\">0.08</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.40</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Robert Lewandowski</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Barcelona</td>\n<td headers=\"League\" class=\"gt_row gt_left\">La Liga</td>\n<td headers=\"Goal Threat\" class=\"gt_row gt_center\">0.83</td>\n<td headers=\"Chance Creation\" class=\"gt_row gt_center\">0.21</td>\n<td headers=\"Ball Progression\" class=\"gt_row gt_center\">0.13</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.39</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Neymar</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Paris S-G</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Ligue 1</td>\n<td headers=\"Goal Threat\" class=\"gt_row gt_center\">0.45</td>\n<td headers=\"Chance Creation\" class=\"gt_row gt_center\">0.46</td>\n<td headers=\"Ball Progression\" class=\"gt_row gt_center\">0.26</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.39</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Victor Osimhen</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Napoli</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Serie A</td>\n<td headers=\"Goal Threat\" class=\"gt_row gt_center\">0.86</td>\n<td headers=\"Chance Creation\" class=\"gt_row gt_center\">0.13</td>\n<td headers=\"Ball Progression\" class=\"gt_row gt_center\">0.10</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.36</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Karim Benzema</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Real Madrid</td>\n<td headers=\"League\" class=\"gt_row gt_left\">La Liga</td>\n<td headers=\"Goal Threat\" class=\"gt_row gt_center\">0.65</td>\n<td headers=\"Chance Creation\" class=\"gt_row gt_center\">0.21</td>\n<td headers=\"Ball Progression\" class=\"gt_row gt_center\">0.20</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.36</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Kingsley Coman</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Bayern Munich</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Bundesliga</td>\n<td headers=\"Goal Threat\" class=\"gt_row gt_center\">0.38</td>\n<td headers=\"Chance Creation\" class=\"gt_row gt_center\">0.36</td>\n<td headers=\"Ball Progression\" class=\"gt_row gt_center\">0.31</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.35</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Mohamed Salah</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">FW</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Liverpool</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Premier League</td>\n<td headers=\"Goal Threat\" class=\"gt_row gt_center\">0.56</td>\n<td headers=\"Chance Creation\" class=\"gt_row gt_center\">0.27</td>\n<td headers=\"Ball Progression\" class=\"gt_row gt_center\">0.21</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.34</td></tr>\n    <tr><td headers=\"Player\" class=\"gt_row gt_left\">Kevin De Bruyne</td>\n<td headers=\"Position\" class=\"gt_row gt_left\">MF</td>\n<td headers=\"Team\" class=\"gt_row gt_left\">Manchester City</td>\n<td headers=\"League\" class=\"gt_row gt_left\">Premier League</td>\n<td headers=\"Goal Threat\" class=\"gt_row gt_center\">0.25</td>\n<td headers=\"Chance Creation\" class=\"gt_row gt_center\">0.49</td>\n<td headers=\"Ball Progression\" class=\"gt_row gt_center\">0.27</td>\n<td headers=\"Overall\" class=\"gt_row gt_center\">0.34</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"8\">Source: FB Ref Via {worldfootballR}</td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nThe old rule was that any metric not broken by Lionel Messi being so far ahead of everyone else is wrong, but Messi isn't quite the freak of nature he once was. Nonetheless, Messi's name being near the top of the ratings is a good sign, as is Mbappé and Haaland flanking him at the top. At a glance, there are few surprises in @tbl-offensive-rating. \n\nKingsley Coman making it into the top ten feels generous, but perhaps the biggest issue is the three Ligue 1 players in the top five. While those three players are exceptional, they seem to be rated a little too high. I think this points to the inevitable league effects compromising the ratings. The big five leagues have been treated equally and we know that isn't really the case (Ligue 1 is probably the weakest of the five). A more precise approach would involve weighting by league strength, but that's complicated and I don't want to do it.\n\nNonetheless, I think the ratings look pretty reasonable, and when we split the top ten overall desirability scores into their component parts, visualised below, we can see how the three offensive components are balanced.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Plot Code (Click to Expand)\"}\noffensive_rating |> \n  head(10) |> \n  tidyr::pivot_longer(\n    cols = 5:7,  \n    names_to = \"component\", \n    values_to = \"value\"\n    ) |> \n  mutate(\n    component = \n      factor(\n        component, \n        levels = c(\"Goal Threat\", \"Chance Creation\", \"Ball Progression\")\n        )\n    ) |> \n  ggplot(aes(x = reorder(Player, Overall), y = value, fill = component)) + \n  geom_col(position = position_dodge2(reverse = TRUE), colour = \"grey20\", linewidth = 0.4) +\n  geom_hline(yintercept = 0, colour = \"grey20\", linewidth = 0.8) +\n  coord_flip() +\n  scale_x_discrete(labels = scales::label_wrap(12)) +\n  scale_fill_manual(values = c(\"#026E99\", \"#D93649\", \"#FCCE26\")) +\n  labs(\n    title = \n        \"Component Desirability Scores for the Offensive Ratings' Best Players\",\n    subtitle = \n      stringr::str_wrap(\n        glue::glue(\n          \"The component desirability scores for the top ten players in the \",\n          \"offensive ratings in the big five leagues for the 2022/23 season. \",\n          \"The overall ratings are a weighted average of the desirability scores \",\n          \"for goal threat (50%), chance creation (25%), and ball progression (25%).\"\n          ),\n        width = 95\n      ),\n    x = NULL, y = \"Desirability\",\n    caption = \n      \"Visualisation: Paul Johnson  |  Data: FB Ref Via {worldfootballR}\"\n    ) +\n  theme(\n    panel.grid.major.y = element_blank(),\n    axis.ticks.y = element_blank(),\n    axis.text.y = element_text(\n      colour = \"grey30\", size = rel(1.15), hjust = 0.5, \n      margin = margin(r = -15, l = -8), lineheight = .4\n      )\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/offensive-components-1.png){width=672}\n:::\n:::\n\n\n# Limitations\n\nI think the appeal of desirability functions is their simplicity, but this is also a constraint. As the complexity of the multivariate optimisation problem increases, the solutions will need to scale similarly. While desirability functions are a quick and easy optimisation method that can perform well in many contexts, I don't think they're suitable when dealing with the most complex, multidimensional problems. Developing a precise, reliable rating system for offensive players would probably involve doing something more complicated than desirability functions!\n\nScaling can improve the performance of desirability functions when dealing with complex optimisation problems, but deciding when and how to use them is difficult. It is more of an art than a science. Consequentially, scaling features risk encouraging searching for results that feel good. If you have theory-driven expectations of the weighted combination of a set of variables, you stand a better chance of avoiding results that confirm your biases but it is difficult to validate desirability functions outside of eyeballing the results and deciding whether they seem right.\n\n# Conclusion\n\nI am generally pretty sceptical of player rating systems in football. Capturing a multidimensional context like this is difficult using a single measure of player performance. And yet here I am, developing a player rating system that attempts to do exactly that! In my defense, I have at least limited these ratings to offense, which makes it slightly better^[Defensive event data does not reflect performance and is more of a measure of team and player style.], and it's a lot easier to rate players over an entire season than a single match. But I'd take these results with a big pinch of salt. I would include several caveats if I released these ratings into the wild, for the non-nerds (there is no chance anyone but nerds is reading this). These ratings are going to be pretty noisy! That said, I don't think the results are complete garbage, which meets the high standard I set for my work. \n\nHopefully, these ratings illustrate how desirability functions work and demonstrate that they could be appropriate in many situations. You don't see desirability functions used very often, but they are quick and easy, and they can be pretty effective.\n\n# Acknowledgments {.appendix}\n\nPreview image by [Dan Cristian Pădureț](https://unsplash.com/@dancristianpaduret) on [Unsplash](https://unsplash.com/photos/a-blackboard-with-a-bunch-of-diagrams-on-it-h3kuhYUCE9A).\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}